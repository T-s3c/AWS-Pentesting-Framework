
Listing user context
```
aws iam list-users
aws iam get-user --user-name <username>
aws iam list-ssh-public-keys
```

Inline Policies of IAM-Users
```
aws iam list-user-policies --user-name <username>
aws iam get-user-policy --user-name <username> --policy-name <policyname>
```


Attached Policies of IAM-Users
```
aws iam list-attached-user-policies --user-name <username>
```


List of IAM-Groups

```
aws iam list-groups
aws iam list-groups-for-user --user-name <username>
aws iam get-group --group-name <name>
```



Inline Policies of IAM-Groups
```
aws iam list-group-policies --group-name <username>
aws iam get-group-policy --group-name <username> --policy-name <policyname>
```

Attached Policies of IAM-groups
```
aws iam list-attached-group-policies --group-name <name>
```


List of IAM Rols
```
aws iam list-roles
aws iam get-role --role-name <role-name>
```

List of Inline Policies of an IAM Role
```
aws iam list-role-policies --role-name <name>
aws iam get-role-policy --role-name <name> --policy-name <name>
```

List of Policies of one IAM Role

```
aws iam list-attached-role-policies --role-name <role-name>
```

List of Policies
```
aws iam list-policies [--only-attached] [--scope Local]
aws iam list-policies-granting-service-access --arn <identity> --service-
Òæ namespaces <svc>
```


Show content of one IAM-Policy
```
aws iam get-policy --policy-arn <policy_arn>
aws iam list-policy-versions --policy-arn <arn>
aws iam get-policy-version --policy-arn <arn:aws:iam::975426262029:policy/
Òæ list_apigateways> --version-id <VERSION_X>
```


Tools
Use of enumerate-iam.py to determine IAM users
```
./enumerate-iam.py --access-key $AWS_ACCESS_KEY_ID --secret-key Òæ $AWS_SECRET_ACCESS_KEY --session-token $AWS_SESSION_TOKEN
```




Usage of single Pacu Modules

```
pacu > run iam__enum_roles --role-name <role-name> --account-id <account-id> -- Òæ word-list <wordlist_names.txt>
pacu > run iam__enum_users --role-name <role-name> --account-id <account-id> -- Òæ word-list <wordlist_names.txt>
```


[PMapper](https://github.com/nccgroup/PMapper)

```
# Create a graph for the account, accessed through AWS CLI profile "test"
pmapper --profile test graph create
```

```
# Run a query to see who can make IAM Users
$ pmapper --profile test query 'who can do iam:CreateUser'
```














