# Recon/ Enumeration
## EC2

### Public Ports

Ports to see what is running on the machines
 
### Public AMIs & EBS Snapshots
 
 ```
 # Public AMIs
aws ec2 describe-images --executable-users all
## Search AMI by ownerID
aws ec2 describe-images --executable-users all --query 'Images[?contains(ImageLocation, `967541184254/`) == `true`]'
## Search AMI by substr ("shared" in the example)
aws ec2 describe-images --executable-users all --query 'Images[?contains(ImageLocation, `shared`) == `true`]'

# Public EBS snapshots (hard-drive copies)
aws ec2 describe-snapshots --restorable-by-user-ids all
aws ec2 describe-snapshots --restorable-by-user-ids all | jq '.Snapshots[] | select(.OwnerId == "099720109477")'
 
 aws ec2 describe-snapshots --restorable-by-user-ids all --owner-ids 000000000000
 ```
 
 ```
 use Prowler
 ./prowler -c ec2_ebs_public_snapshot
 ```

 ### Public URL template
 
```
 # EC2
ec2-{ip-seperated}.compute-1.amazonaws.com
# ELB
http://{user_provided}-{random_id}.{region}.elb.amazonaws.com:80/443
https://{user_provided}-{random_id}.{region}.elb.amazonaws.com
 ```
 
